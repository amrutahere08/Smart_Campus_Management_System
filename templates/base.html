<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Smart Campus{% endblock %}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    {% block extra_css %}{% endblock %}
</head>

<body>
    <!-- Modern Navigation Bar -->
    <nav
        style="position: sticky; top: 0; z-index: 1000; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(0, 0, 0, 0.08); box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);">
        <div style="max-width: 1400px; margin: 0 auto; padding: 0 2rem;">
            <div style="display: flex; justify-content: space-between; align-items: center; height: 70px;">
                <!-- Logo/Brand -->
                <a href="{% if current_user.is_authenticated %}{% if current_user.role == 'Admin' %}{{ url_for('admin.dashboard') }}{% elif current_user.role == 'Student' %}{{ url_for('student.dashboard') }}{% elif current_user.role == 'Faculty' %}{{ url_for('faculty.dashboard') }}{% elif current_user.role == 'Security' %}{{ url_for('security.dashboard') }}{% elif current_user.role == 'SecurityAdmin' %}{{ url_for('security.admin_dashboard') }}{% elif current_user.role == 'VisitorEntry' %}{{ url_for('visitor_entry.dashboard') }}{% elif current_user.role == 'Counselor' %}{{ url_for('counselor.dashboard') }}{% else %}{{ url_for('common.index') }}{% endif %}{% else %}{{ url_for('common.index') }}{% endif %}"
                    style="text-decoration: none; display: flex; align-items: center; gap: 0.75rem;">
                    <img src="{{ url_for('static', filename='images/chanakya_logo.png') }}" alt="Chanakya University"
                        style="height: 45px; width: auto; object-fit: contain;">
                    <span
                        style="font-size: 1.5rem; font-weight: 800; background: linear-gradient(135deg, #3b82f6, #8b5cf6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; letter-spacing: -0.02em;">Smart
                        Campus</span>
                </a>

                <!-- Navigation Menu -->
                <ul style="display: flex; align-items: center; gap: 0.5rem; list-style: none; margin: 0; padding: 0;">
                    {% if current_user.is_authenticated %}
                    {% if current_user.role == 'Admin' %}
                    <li><a href="{{ url_for('admin.dashboard') }}" class="nav-link">Dashboard</a></li>
                    <li><a href="{{ url_for('admin.events') }}" class="nav-link">Events</a></li>
                    <li><a href="{{ url_for('admin.users') }}" class="nav-link">Users</a></li>
                    <li><a href="{{ url_for('admin.pending_registrations') }}" class="nav-link">Pending</a></li>
                    <li style="margin-left: 0.5rem;">
                        <a href="{{ url_for('admin.profile') }}"
                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: linear-gradient(135deg, #f8fafc, #f1f5f9); border-radius: 10px; text-decoration: none; color: #1e293b; font-weight: 600; transition: all 0.3s;">
                            <span style="font-size: 0.95rem;">{{ current_user.full_name }}</span>
                        </a>
                    </li>
                    {% elif current_user.role == 'Student' %}
                    <li><a href="{{ url_for('student.dashboard') }}" class="nav-link">Dashboard</a></li>
                    <li><a href="{{ url_for('student.events') }}" class="nav-link">Events</a></li>
                    <li><a href="{{ url_for('student.chat') }}" class="nav-link">Chat</a></li>
                    <li style="margin-left: 0.5rem;">
                        <a href="{{ url_for('student.profile') }}"
                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: linear-gradient(135deg, #f8fafc, #f1f5f9); border-radius: 10px; text-decoration: none; color: #1e293b; font-weight: 600; transition: all 0.3s;">
                            <span style="font-size: 0.95rem;">{{ current_user.full_name }}</span>
                        </a>
                    </li>
                    {% elif current_user.role == 'Faculty' %}
                    <li><a href="{{ url_for('faculty.dashboard') }}" class="nav-link">Dashboard</a></li>
                    <li><a href="{{ url_for('faculty.events') }}" class="nav-link">Events</a></li>
                    <li><a href="{{ url_for('faculty.chat') }}" class="nav-link">Chat</a></li>
                    <li><a href="{{ url_for('common.face_recognition') }}" class="nav-link">Take Attendance</a></li>
                    <li style="margin-left: 0.5rem;">
                        <a href="{{ url_for('faculty.profile') }}"
                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: linear-gradient(135deg, #f8fafc, #f1f5f9); border-radius: 10px; text-decoration: none; color: #1e293b; font-weight: 600; transition: all 0.3s;">
                            <span style="font-size: 0.95rem;">{{ current_user.full_name }}</span>
                        </a>
                    </li>
                    {% elif current_user.role == 'Counselor' %}
                    <li><a href="{{ url_for('counselor.dashboard') }}" class="nav-link">Dashboard</a></li>
                    {% elif current_user.role == 'SecurityAdmin' %}
                    <li><a href="{{ url_for('security.admin_dashboard') }}" class="nav-link">Dashboard</a></li>
                    <li><a href="{{ url_for('security.entry_exit_view') }}" class="nav-link">IN/OUT View</a></li>
                    <li><a href="{{ url_for('visitor_entry.history') }}" class="nav-link">Visitor History</a></li>
                    <li style="margin-left: 0.5rem;">
                        <a href="#"
                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: linear-gradient(135deg, #f8fafc, #f1f5f9); border-radius: 10px; text-decoration: none; color: #1e293b; font-weight: 600; transition: all 0.3s;">
                            <span style="font-size: 0.95rem;">{{ current_user.full_name }}</span>
                        </a>
                    </li>
                    {% elif current_user.role == 'VisitorEntry' %}
                    <li><a href="{{ url_for('visitor_entry.dashboard') }}" class="nav-link">Dashboard</a></li>
                    <li><a href="{{ url_for('visitor_entry.history') }}" class="nav-link">History</a></li>
                    <li><a href="{{ url_for('visitor_entry.manual_entry') }}" class="nav-link">Manual Entry</a></li>
                    <li style="margin-left: 0.5rem;">
                        <a href="#"
                            style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: linear-gradient(135deg, #f8fafc, #f1f5f9); border-radius: 10px; text-decoration: none; color: #1e293b; font-weight: 600; transition: all 0.3s;">
                            <span style="font-size: 0.95rem;">{{ current_user.full_name }}</span>
                        </a>
                    </li>
                    {% endif %}

                    <li style="margin-left: 0.5rem;">
                        <a href="{{ url_for('auth.logout') }}"
                            style="padding: 0.65rem 1.5rem; background: linear-gradient(135deg, #ef4444, #dc2626); color: white; border-radius: 10px; text-decoration: none; font-weight: 600; font-size: 0.95rem; transition: all 0.3s; box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3); display: inline-block;">
                            Logout
                        </a>
                    </li>
                    {% else %}
                    <li><a href="{{ url_for('common.index') }}" class="nav-link">Home</a></li>
                    <li><a href="{{ url_for('common.visitor') }}" class="nav-link">Visitor Info</a></li>
                    <li style="margin-left: 0.5rem;">
                        <a href="{{ url_for('auth.login') }}"
                            style="padding: 0.65rem 1.5rem; background: linear-gradient(135deg, #3b82f6, #8b5cf6); color: white; border-radius: 10px; text-decoration: none; font-weight: 600; font-size: 0.95rem; transition: all 0.3s; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3); display: inline-block;">
                            Login
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <style>
        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.65rem 1.25rem;
            color: #64748b;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
            border-radius: 10px;
            transition: all 0.3s;
            position: relative;
        }

        .nav-link:hover {
            color: #3b82f6;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(139, 92, 246, 0.08));
            transform: translateY(-1px);
        }

        .nav-link i {
            font-size: 1rem;
            opacity: 0.8;
        }

        .nav-link:hover i {
            opacity: 1;
        }

        a[href*="logout"]:hover,
        a[href*="login"]:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }

        a[href*="profile"]:hover {
            background: linear-gradient(135deg, #e0f2fe, #dbeafe);
            transform: translateY(-1px);
        }
    </style>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="container" style="margin-top: 1rem;">
        {% for category, message in messages %}
        <div class="alert alert-{{ category }}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}

    <!-- Main Content -->
    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- Floating Chat Widget -->
    {% include 'chat_widget.html' %}

    <!-- Modern Minimal Footer -->
    <footer
        style="background: linear-gradient(135deg, #f8fafc, #e2e8f0); border-top: 2px solid #cbd5e1; margin-top: 4rem;">
        <div style="max-width: 1400px; margin: 0 auto; padding: 2.5rem 2rem;">
            <div
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
                <!-- Brand Section -->
                <div>
                    <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                        <img src="{{ url_for('static', filename='images/chanakya_logo.png') }}"
                            alt="Chanakya University" style="height: 40px; width: auto;">
                        <span
                            style="font-size: 1.25rem; font-weight: 700; background: linear-gradient(135deg, #3b82f6, #8b5cf6); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Smart
                            Campus</span>
                    </div>
                    <p style="color: #64748b; font-size: 0.9rem; line-height: 1.6;">
                        Advanced campus monitoring and management system powered by AI and face recognition technology.
                    </p>
                </div>

                <!-- Quick Links -->
                <div>
                    <h3 style="color: #1e293b; font-size: 1rem; font-weight: 600; margin-bottom: 1rem;">Quick Links</h3>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        <li style="margin-bottom: 0.5rem;">
                            <a href="{{ url_for('common.index') }}"
                                style="color: #64748b; text-decoration: none; font-size: 0.9rem; transition: color 0.3s;">Home</a>
                        </li>
                        <li style="margin-bottom: 0.5rem;">
                            <a href="{{ url_for('common.visitor') }}"
                                style="color: #64748b; text-decoration: none; font-size: 0.9rem; transition: color 0.3s;">Visitor
                                Info</a>
                        </li>
                        <li style="margin-bottom: 0.5rem;">
                            <a href="{{ url_for('auth.login') }}"
                                style="color: #64748b; text-decoration: none; font-size: 0.9rem; transition: color 0.3s;">Login</a>
                        </li>
                        <li style="margin-bottom: 0.5rem;">
                            <a href="https://chanakyauniversity.edu.in" target="_blank" rel="noopener noreferrer"
                                style="color: #64748b; text-decoration: none; font-size: 0.9rem; transition: color 0.3s;">Chanakya
                                University</a>
                        </li>
                    </ul>
                </div>

                <!-- Contact Info -->
                <div>
                    <h3 style="color: #1e293b; font-size: 1rem; font-weight: 600; margin-bottom: 1rem;">Contact</h3>
                    <p style="color: #64748b; font-size: 0.9rem; line-height: 1.8;">
                        <i class="fas fa-envelope" style="margin-right: 0.5rem;"></i>info@smartcampus.edu<br>
                        <i class="fas fa-phone" style="margin-right: 0.5rem;"></i>+91 1234567890<br>
                        <i class="fas fa-map-marker-alt" style="margin-right: 0.5rem;"></i>Chanakya University,
                        Bangalore
                    </p>
                </div>
            </div>

            <!-- Social Media Section -->
            <div style="border-top: 2px solid #cbd5e1; padding-top: 2rem; margin-bottom: 1.5rem;">
                <h3
                    style="color: #1e293b; font-size: 1.1rem; font-weight: 600; text-align: center; margin-bottom: 1.5rem;">
                    Connect With Chanakya University
                </h3>
                <div style="display: flex; gap: 1.5rem; justify-content: center; flex-wrap: wrap;">
                    <a href="https://www.facebook.com/chanakyauniversity" target="_blank" rel="noopener noreferrer"
                        class="social-link"
                        style="display: flex; align-items: center; justify-content: center; width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #1877f2, #0c63d4); color: white; text-decoration: none; transition: all 0.3s; box-shadow: 0 4px 12px rgba(24, 119, 242, 0.3);">
                        <i class="fab fa-facebook-f" style="font-size: 1.25rem;"></i>
                    </a>
                    <a href="https://twitter.com/chanakya_uni" target="_blank" rel="noopener noreferrer"
                        class="social-link"
                        style="display: flex; align-items: center; justify-content: center; width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #1da1f2, #0c85d0); color: white; text-decoration: none; transition: all 0.3s; box-shadow: 0 4px 12px rgba(29, 161, 242, 0.3);">
                        <i class="fab fa-twitter" style="font-size: 1.25rem;"></i>
                    </a>
                    <a href="https://www.linkedin.com/school/chanakya-university" target="_blank"
                        rel="noopener noreferrer" class="social-link"
                        style="display: flex; align-items: center; justify-content: center; width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #0077b5, #005885); color: white; text-decoration: none; transition: all 0.3s; box-shadow: 0 4px 12px rgba(0, 119, 181, 0.3);">
                        <i class="fab fa-linkedin-in" style="font-size: 1.25rem;"></i>
                    </a>
                    <a href="https://www.instagram.com/chanakyauniversity" target="_blank" rel="noopener noreferrer"
                        class="social-link"
                        style="display: flex; align-items: center; justify-content: center; width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #e1306c, #c13584, #833ab4); color: white; text-decoration: none; transition: all 0.3s; box-shadow: 0 4px 12px rgba(225, 48, 108, 0.3);">
                        <i class="fab fa-instagram" style="font-size: 1.25rem;"></i>
                    </a>
                    <a href="https://www.youtube.com/@chanakyauniversity" target="_blank" rel="noopener noreferrer"
                        class="social-link"
                        style="display: flex; align-items: center; justify-content: center; width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #ff0000, #cc0000); color: white; text-decoration: none; transition: all 0.3s; box-shadow: 0 4px 12px rgba(255, 0, 0, 0.3);">
                        <i class="fab fa-youtube" style="font-size: 1.25rem;"></i>
                    </a>
                </div>
            </div>

            <!-- Bottom Bar -->
            <div style="border-top: 2px solid #cbd5e1; padding-top: 1.5rem; text-align: center;">
                <p style="color: #64748b; font-size: 0.875rem; margin: 0;">
                    Â© 2025 Smart Campus - Chanakya University. All rights reserved.
                </p>
            </div>
        </div>
    </footer>

    <style>
        footer a:hover {
            color: #3b82f6 !important;
        }

        .social-link:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3) !important;
        }

        .social-link:active {
            transform: translateY(-2px) scale(1.05);
        }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    {% block extra_js %}{% endblock %}
</body>

</html>